#include "sys.h"
#include "eeprom.h"

uint16_t VirtAddVarTab[NumbOfVar] = {0x5500, 0x5501, 0x5502, 0x5503, 0x5504, 0x5505, 0x5506, 0x5507, 0x5508, 0x5509, 0x550a, 0x550b, 0x550c, 0x550d, 0x550e, 0x550f,
									 0x5510, 0x5511, 0x5512, 0x5513, 0x5514, 0x5515, 0x5516, 0x5517, 0x5518, 0x5519, 0x551a, 0x551b, 0x551c, 0x551d, 0x551e, 0x551f,
									 0x5520, 0x5521, 0x5522, 0x5523, 0x5524, 0x5525, 0x5526, 0x5527, 0x5528, 0x5529, 0x552a, 0x552b, 0x552c, 0x552d, 0x552e, 0x552f,
									 0x5530, 0x5531, 0x5532, 0x5533, 0x5534, 0x5535, 0x5536, 0x5537, 0x5538, 0x5539, 0x553a, 0x553b, 0x553c, 0x553d, 0x553e, 0x553f,
									 0x5540, 0x5541, 0x5542, 0x5543, 0x5544, 0x5545, 0x5546, 0x5547, 0x5548, 0x5549, 0x554a, 0x554b, 0x554c, 0x554d, 0x554e, 0x554f,
									 0x5550, 0x5551, 0x5552, 0x5553};//39+45

u16 Flash_Write(u16 * pData, u16 len, u16 off)
{
	int i;
	u16 tmp=0;
	u16 r=FLASH_COMPLETE;
	for(i=0;i<len;i++){
		tmp = pData[i];
		r = EE_WriteVariable(VirtAddVarTab[i+off],tmp);
		if(r!=FLASH_COMPLETE){
			Debug_Printf(20, "e_We:%d,%d\r\n",off+i,r);
			//break;
		}
	}
	Debug_Printf(20, "e_W:%d,%d\r\n",off,len);
	return r;
}

u16 Flash_Read(u16 * pData, u16 len, u16 off)
{
	int i;
	u16 tmp=0;
	u16 r=0;
	for(i=0;i<len;i++){
		r = EE_ReadVariable(VirtAddVarTab[i+off],&tmp);
		if(r!=0){
			Debug_Printf(20, "e_Re:%d,%d\r\n",off,r);
			//break;
		}else{
			pData[i] = tmp;
		}
	}
	Debug_Printf(20, "e_R:%d,%d\r\n",off,len);
	return r;
}
